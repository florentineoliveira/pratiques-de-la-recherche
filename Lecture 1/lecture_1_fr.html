<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Lecture 0: Refresher</title>
    <meta charset="utf-8" />
    <meta name="author" content="Florentine Oliveira" />
    <meta name="date" content="2024-07-17" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Lecture 0: <code>R</code>efresher
]
.subtitle[
## Pratiques de la Recherche en √âconomie
]
.author[
### Florentine Oliveira
]
.date[
### 2024-07-17
]

---




layout: true


---
# About me

&amp;nbsp;


Doctorante en √âconomie √† PSE en 3√®me ann√©e

Champs de recherche: √©conomie de la famille, de l'√©ducation, du travail


&amp;nbsp;

&amp;nbsp;

.center[
**Me contacter**: florentine.oliveira@psemail.eu

**Si vous avez des questions ou envie/besoin de parler**: Campus Jourdan, Bureau R4-54 
]

---
# Objectifs du cours

&amp;nbsp;

&amp;nbsp;

- Se familiariser avec 
  - les techniques **√©conom√©triques** de base
  - la **recherche** en **√©conomie appliqu√©e**

- Apprendre le language de programmation `R`

&amp;nbsp;

`\(\implies\)` pour pouvoir r√©aliser votre **m√©moire** !



---
# Roadmap


&amp;nbsp;


### Semestre 1

1. S√©ance 1 (aujourd'hui): Rappels de `R` 
2. S√©ance 2 (): R√©diger en `\(\LaTeX\)`
3. S√©ance 3 (): Statistiques Descriptives

### Semestre 2
4. S√©ance 4 (): R√©gressions lin√©aires simples et multiples
5. S√©ance 5 (): M√©thode des variables instrumentales
6. S√©ance 6 (): Doubles-Diff√©rences (DiD)
7. S√©ance 7 (): Regression Discontinuity Design
8. S√©ance 8 ():


---
# Validation du cours

## DM


## M√©moire


---
# Cette s√©ance

&amp;nbsp;

1. La recherche en √©conomie appliqu√©e

2. `R`: rappels et **trouver mot**

  2.1. D√©finition, usages, interface  
  2.2. Projet `R`   
  2.3. Importer des donn√©es   
  2.4. Manipulation des donn√©es avec `dplyr`   
  2.5. Visualisation des donn√©es avec `ggplot`   
  2.6. Maps
  
---
# 1. La recherche en √©conomie appliqu√©e

###  Qu'est-ce que la recherche en √©conomie appliqu√©e?

- R√©pondre √† des **questions de recherche** pour apprendre sur les comportements humains, l'efficacit√© des poliques publiques, ...

  - Grande diversit√© des champs de recherche: √©ducation, travail, famille, environnement, macro√©conomie, politique, migration, genre, urban, crime, √©conomie historique, ...
  
  
- ... en utilisant des techniques statistiques rigoureuses (= **√©conom√©trie**) ...


- ... et des donn√©es!


- `R` est un logiciel qui permet de r√©aliser ces analyses descriptives et empiriques.

---
# 1. La recherche en √©conomie appliqu√©e

### Quelques exemples de questions de recherche 

- Quel est l'effet des bourses de scolarit√© **sur** la r√©ussite scolaire? 

- Quel est l'effet d'un allongement de la dur√©e du cong√© parental **sur** la participation au march√© du travail des m√®res?

- Quelle est l'ampleur de la discrimination dans le processus de recrutement?

- Quel est l'effet d'un assouplissement des conditions d'√©ligibilit√© √† l'assurance ch√¥mage **sur** l'emploi?

- Quel est l'effet de la pollution atmosph√©rique **sur** la productivit√©?  

- Quel est le r√¥le des m√©dias **sur** le comportement de vote?

- Quel est l'effet de la densit√© de population **sur** les salaires?

---
# 1. La recherche en √©conomie appliqu√©e

.center[
## üö® Corr√©lation `\(\neq\)` causalit√© 
]


---
layout: false
class: center, middle, inverse

# R

---
# 2. `R`: rappels et **trouver mot** 


## 2.1. `R`ecap : D√©finition, usages, interface

- D'apr√®s le site internet de `R` : *R is a free software environment for statistical computing and graphics.*

  - un logiciel (interface R studio)
  
  - un language de programmation
  
- `R` est **gratuit** et en **open source**

  - donc utilis√© par beaucoup de monde dans les milieux acad√©mique insitutionnel

- Logiciel tr√®s **polyvalent**

  - statistiques decriptives, analyses √©conom√©triques, analyse de donn√©es spaciales, ML, Rmarkdown

- Comp√©tence valorisable et de plus en plus appr√©ci√©e (public &amp; priv√©)   


---
### Popularit√© de `R`&lt;sup&gt;1&lt;/sup&gt;

.pull-left[
&lt;img src="imgs/popularity_datascientist.jpg" width="150%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="imgs/popularity_scholar.png" width="80%" style="display: block; margin: auto;" /&gt;
]

.footnote[
[1]: [The Popularity of Data Science Software](https://r4stats.com/articles/popularity/)
]

---
## 2.1. `R`ecap : D√©finition, usages, interface

&lt;img src="imgs/interface.png" width="80%" style="display: block; margin: auto;" /&gt;


---
## 2.2. `R`ecap : Projet `R`

Les projets `R` permettent une meilleure organisation de votre travail.
.pull-left[
&lt;img src="imgs/rproj.jpeg" width="60%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
**Cr√©ation d'un projet `R`:** 
- Dans R-Studio  

  - Fichier `\(\rightarrow\)` Nouveau projet  

]


---
class: inverse
# Application: cr√©er votre projet `R`

<div class="countdown" id="timer_231ff9ea" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

.pull-left[
&lt;img src="imgs/rproj_sans_fond.png" width="70%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
Cr√©er un projet R pour la Lecture 1 en respectant cette structure
]



---
## 2.3. `R`ecap: Importer des donn√©es

**Format .csv:**

- `read.csv()` ou `read.cvs2()` avec l'argument `sep = ';'`

&amp;nbsp;

**Formats .dta (stata), .sas7bdat (sas): ** package `haven` (nb: `haven` est inclus dans `tidyverse`)

  - `.dta` : `read_dta()`
  
  - `.sas7dbat` : `read_sas()`
  
&amp;nbsp;

**Format .xls ou .xlsx (Excel): ** package `readxl`

  - `read_excel()`  
  
---
## 2.3. `R`ecap: Importer des donn√©es

&amp;nbsp;

**Format .rds:** format de donn√©es le moins lourd et optimal pour travailler sur R, surtout quand les bases de donn√©es sont tr√®s volumineuses

- `readRDS()`

**Conseil**: √† la fin du script de cleaning, enregistrer le ou les data.frames nettoy√©s en format `.RDS` avec la fonction `saveRDS()` et importer ces donn√©es nettoy√©es dans le script sur lequel vous ferez toutes vos analyses.
  
  
---
## `R`ecap: Manipulation et visualisation des donn√©es

Principal package pour la manipulation et visualitation des donn√©es : `dplyr`

`$$\text{data.frame} \;\; \underbrace{\text{%&gt;%}}_{\text{pipe}} \;\; \text{function}(\text{your action})$$`

[Cheatsheet Dplyr](#)

--
### Principales fonctions 

- `mutate()`: cr√©er ou modifier des variables
- `summarise()`: r√©sume les donn√©es par des statistiques descriptives 
- `filter()`: conserve ou supprime les lignes 
- `group_by()`: permet de grouper des observations entre elles 
- `select()`: consevre ou supprime des colonnes
- `arrange()`: ordonne les observations par rapport aux valeurs d'une colonne

---
class: inverse
# Application : Titanic

Ce jeu de donn√©es fournit des informations sur le sort des passagers du paquebot ¬´ Titanic ¬ª, r√©sum√©es en fonction du statut √©conomique (class), du sexe, de l'√¢ge et de la survie.


``` r
titanic = as.data.frame(Titanic)

head(titanic)
```

```
##   Class    Sex   Age Survived Freq
## 1   1st   Male Child       No    0
## 2   2nd   Male Child       No    0
## 3   3rd   Male Child       No   35
## 4  Crew   Male Child       No    0
## 5   1st Female Child       No    0
## 6   2nd Female Child       No    0
```

---
class: inverse
# Application : Titanic

<div class="countdown" id="timer_99ed89ae" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

&amp;nbsp;


1. Calculer le taux de survie par classe, par sexe, et par √¢ge

2. Cr√©er une variable `passenger` qui vaut 1 si l'individu n'est pas un membre d'√©quipage (*crew*), 0 si c'est un membre d'√©quipage

3. Cr√©er une table qui r√©sume, pour les adultes uniquement, le taux de survie par classe x Sexe et ordonner par ordre d√©croissant

---
background-color: #fbe6ec
# Solution : Titanic

1. Calculer le taux de survie par classe, par sexe, et par √¢ge


``` r
titanic %&gt;% 
* group_by(Class) %&gt;%
  summarise(tx_survie = sum(Freq[Survived == "Yes"])/sum(Freq)) %&gt;% 
  ungroup()
```

```
## # A tibble: 4 √ó 2
##   Class tx_survie
##   &lt;fct&gt;     &lt;dbl&gt;
## 1 1st       0.625
## 2 2nd       0.414
## 3 3rd       0.252
## 4 Crew      0.240
```

---
background-color: #fbe6ec
count: false
# Solution : Titanic

1. Calculer le taux de survie par classe, par sexe, et par √¢ge


``` r
titanic %&gt;% 
  group_by(Class) %&gt;% 
* summarise(tx_survie = sum(Freq[Survived == "Yes"])/sum(Freq)) %&gt;%
  ungroup()
```

```
## # A tibble: 4 √ó 2
##   Class tx_survie
##   &lt;fct&gt;     &lt;dbl&gt;
## 1 1st       0.625
## 2 2nd       0.414
## 3 3rd       0.252
## 4 Crew      0.240
```

---
background-color: #fbe6ec
# Solution : Titanic

1. Calculer le taux de survie par classe, par sexe, et par √¢ge


``` r
titanic %&gt;% 
  group_by(Sex) %&gt;% 
  summarise(tx_survie = sum(Freq[Survived == "Yes"])/sum(Freq)) %&gt;% 
  ungroup()
```

```
## # A tibble: 2 √ó 2
##   Sex    tx_survie
##   &lt;fct&gt;      &lt;dbl&gt;
## 1 Male       0.212
## 2 Female     0.732
```


---
background-color: #fbe6ec
# Solution : Titanic

1. Calculer le taux de survie par classe, par sexe, et par √¢ge


``` r
titanic %&gt;% 
  group_by(Age) %&gt;% 
  summarise(tx_survie = sum(Freq[Survived == "Yes"])/sum(Freq)) %&gt;% 
  ungroup()
```

```
## # A tibble: 2 √ó 2
##   Age   tx_survie
##   &lt;fct&gt;     &lt;dbl&gt;
## 1 Child     0.523
## 2 Adult     0.313
```


---
background-color: #fbe6ec
# Solution : Titanic

2. Cr√©er une variable `passenger` qui vaut 1 si l'individu n'est pas un membre d'√©quipage (*crew*), 0 si c'est un membre d'√©quipage


``` r
# Solution 1
titanic %&gt;% 
  mutate(passenger = ifelse(Class != "Crew", 1, 0))

# Solution 2
titanic %&gt;% 
  mutate(passenger = case_when(Class != "Crew" ~ 1,
                               Class == "Crew" ~ 0))
```

**Conseil**: utiliser `case_when` quand il y a plus d'une condition.

---
background-color: #fbe6ec
# Solution : Titanic

3. Cr√©er une table qui r√©sume, pour les adultes uniquement, le taux de survie par classe x Sexe et ordonner par ordre d√©croissant


``` r
titanic %&gt;%
  filter(Age == "Adult") %&gt;%
  group_by(Class, Sex) %&gt;%
  summarise(tx_survie = sum(Freq[Survived == "Yes"]) / sum(Freq)) %&gt;%
  arrange(desc(tx_survie))
```




---
### Left-right-full-anti joints



---
### Formats wide et long

---
class: inverse
## Application : √âlections l√©gislatives de 2024 en France 

<div class="countdown" id="timer_e7056cce" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

1. Importer les donn√©es

2. Calculer le taux d'absention moyen par d√©partement

3. Calculer le taux de participation moyen des villes dont le code postal termine par un 7


---
background-color: #fbe6ec
# Solution









---
class: inverse
## Application: Carte des r√©sultats du 2nd tour des l√©gislatives 2024

<div class="countdown" id="timer_0937f884" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>









---
name: bestfriend
# Vos 4 meilleurs amis


1. La **commande** `help(.)` ou `?.`

--

2. Les ***cheatsheets***
  - [Exemple](#cheatR)

--

3. **Internet** (stackoverflow): 

  - vous ne serez jamais la premi√®re personne √† rencontrer les probl√®mes auxquels vous faites face
  - copier/coller le message d'erreur peut suffire, mais essayez de comprendre par vous m√™me d'abord
  
--

4. **ChatGPT**: devient de plus en plus performant pour r√©soudre les probl√®mes de codes. 
  - ‚ö†Ô∏è souvent les packages ne sont pas √† jour, les fonctions propos√©es invent√©es

--

ü§ùÔ∏è Soyez autonomes: ne demander de l'aide √† vos camarades (ou √† moi) uniquement apr√®s avoir demand√© √† vos 4 meilleurs amis!




---
# Bonnes pratiques

### Organisation du travail

- Un dossier pour chaque projet de recherche

  - Scripts
    - un scripts par t√¢che: cleaning, statistiques descriptives, anlayse empirique
  
  - Data
    - `.rds`
  
  - Figures
  
  - (Admin)
  


---
### Commenter son code pour vous-m√™me...&lt;sup&gt;1&lt;/sup&gt;

&lt;img src="imgs/meme_comment_code.jpeg" width="60%" style="display: block; margin: auto;" /&gt;

---
### ... et vos coll√®gues&lt;sup&gt;1&lt;/sup&gt;

&lt;img src="imgs/headache.png" width="60%" style="display: block; margin: auto;" /&gt;


---
### **Essayer** de ne pas s'√©nerver&lt;sup&gt;1&lt;/sup&gt;

.pull-left[
&lt;img src="imgs/parenthesis.jpeg" width="70%" style="display: block; margin: auto;" /&gt;
]
.pull-right[
L'apprentissage de `R` est long et fastidieux, mais les rendements sont croissants!
.footnote[
[1]: R Memes For Statistical Fiends
]
]


---
# Cheatsheets

- [test1](https://rstudio.github.io/cheatsheets/rstudio-ide.pdf)
- [test](https://posit.co/resources/cheatsheets/)

---
name: cheatR
class: center, middle
&lt;img src="imgs/cheatsheetR.png" width="110%" style="display: block; margin: auto;" /&gt;
[Back](#bestfriend)




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
